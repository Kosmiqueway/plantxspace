---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const entries = await getCollection("assumptions");
---

<Layout title="Assumptions" description="Registry of key assumptions with status" editPath="src/pages/assumptions.astro">
  <section class="section">
    <h1>Assumptions registry</h1>
    <p>We track assumptions explicitly. Each item lists status, rationale, and related canon content.</p>
  </section>

  <section class="section">
    <table class="table-like">
      <thead>
        <tr>
          <th>Assumption</th>
          <th>Status</th>
          <th>Rationale</th>
          <th>Updated</th>
          <th>Related</th>
        </tr>
      </thead>
      <tbody>
        {entries.map((item) => (
          <tr>
            <td>{item.data.statement}</td>
            <td>{item.data.status}</td>
            <td>{item.data.rationale}</td>
            <td>{new Date(item.data.updated).toISOString().split("T")[0]}</td>
            <td>{item.data.related.join(", ")}</td>
          </tr>
        ))}
      </tbody>
    </table>
  </section>
</Layout>
